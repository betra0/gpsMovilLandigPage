<form id="contact-form" class="gap-4 grid grid-cols-1 md:grid-cols-2">
  <input
    type="text"
    name="name"
    placeholder="Nombre"
    required
    class="border p-3 rounded-lg"
  />

  <input
    type="email"
    name="email"
    placeholder="Correo"
    required
    class="border p-3 rounded-lg"
  />

  <textarea
    name="message"
    placeholder="Mensaje"
    rows="4"
    required
    class="border p-3 rounded-lg md:col-span-2"
  ></textarea>

  <button
    type="submit"
    class="bg-black text-white py-3 rounded-lg md:col-span-2"
  >
    Enviar
  </button>

  <p id="form-status" class="text-center text-sm"></p>
</form>

<script is:inline>
  const form = document.getElementById("contact-form");
  const status = document.getElementById("form-status");

  if (form && status) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      status.textContent = "Enviando...";
      status.className = "text-center text-sm";

      const formData = new FormData(form);

      try {
        const res = await fetch("https://formspree.io/f/mnjagrgv", {
          method: "POST",
          body: formData,
          headers: {
            Accept: "application/json",
          },
        });

        if (!res.ok) throw new Error();

        status.textContent = "Mensaje enviado correctamente.";
        status.className = "text-green-600 text-center text-sm";
        form.reset();
      } catch {
        status.textContent = "Error al enviar. Intenta nuevamente.";
        status.className = "text-red-600 text-center text-sm";
      }
    });
  }
</script>
